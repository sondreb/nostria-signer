<div class="container">
  @if (loading()) {
    <div class="text-center">
      <div class="spinner"></div>
      <p>Loading your signer...</p>
    </div>
  } @else {
    <div class="welcome-card card">
      <div class="bg-pattern"></div>
      <div class="content">
        <img src="icons/icon-384x384.png" alt="Nostria Signer Logo" class="app-logo">
        
        <h1 class="nostria-header welcome-title">Welcome to Nostria Signer</h1>
        <p class="subtitle">
          Your secure and easy-to-use Nostr identity manager for remote signing with the 
          Nostr Connect protocol (NIP-46).
        </p>
        
        @if (!showImport()) {
          <div class="info-box">
            <h3>About Signer Identity</h3>
            <p>
              The key you create or import here is your <strong>Signer Identity</strong>, which is 
              separate from your regular Nostr identity.
            </p>
            <p>
              This Signer Identity will manage your Nostr accounts securely without exposing them.
              <strong>Do not</strong> import your regular Nostr private keys on this screen.
            </p>
          </div>
          
          <div class="action-buttons">
            <button (click)="onGetStarted()" class="primary-btn">
              <span class="btn-icon">‚ú®</span>
              Generate New Signer Key
            </button>
            <button (click)="toggleImportView()" class="secondary-btn">
              <span class="btn-icon">üîë</span>
              Import Existing Signer Key
            </button>
          </div>
        } @else {
          <div class="import-form">
            <h2>Import Existing Signer Key</h2>
            <p>Enter your Signer private key (nsec or hex format)</p>
            
            <div class="warning-message">
              <strong>Warning:</strong> This should be your dedicated Nostria Signer key, 
              not your regular Nostr identity. Importing your main Nostr identity here is not 
              recommended.
            </div>
            
            @if (importError()) {
              <div class="error-message">
                <span class="error-icon">‚ö†Ô∏è</span>
                {{ importError() }}
              </div>
            }
            
            <div class="form-group">
              <input 
                type="password" 
                [ngModel]="importedKey()" 
                (ngModelChange)="importedKey.set($event)" 
                placeholder="nsec or hex private key"
                class="form-control"
                autocomplete="off"
                name="off"
                data-lpignore="true"
                data-1p-ignore="true"
                data-form-type="other"
              />
            </div>
            
            <div class="action-buttons">
              <button (click)="onImportKey()" class="primary-btn">
                <span class="btn-icon">‚úì</span>
                Import
              </button>
              <button (click)="toggleImportView()" class="secondary-btn">
                <span class="btn-icon">‚úï</span>
                Cancel
              </button>
            </div>
          </div>
        }
        
        <div class="features mt-4">
          <div class="feature-row">
            <div class="feature-card">
              <span class="feature-icon">üîí</span>
              <h3>Secure</h3>
              <p>Your private keys never leave your device</p>
            </div>
            <div class="feature-card">
              <span class="feature-icon">üåê</span>
              <h3>Connected</h3>
              <p>Works with many Nostr clients</p>
            </div>
            <div class="feature-card">
              <span class="feature-icon">üîÑ</span>
              <h3>Flexible</h3>
              <p>Manage multiple identities</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  }
  <app-theme-switcher></app-theme-switcher>
</div>

<style>
  .btn-icon {
    display: inline-block;
    margin-right: 6px;
  }
  
  .feature-row {
    display: flex;
    gap: 1.5rem;
    margin-top: 3rem;
  }
  
  .feature-card {
    flex: 1;
    background-color: var(--card-bg);
    padding: 1.5rem;
    border-radius: var(--radius-md);
    text-align: center;
    border: 1px solid var(--border-color);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  .feature-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
  }
  
  .feature-icon {
    font-size: 2rem;
    margin-bottom: 1rem;
    display: block;
  }
  
  .feature-card h3 {
    color: var(--text-color);
    margin-bottom: 0.5rem;
  }
  
  .feature-card p {
    font-size: 0.875rem;
    color: var(--text-secondary);
  }
  
  .error-icon {
    display: inline-block;
    margin-right: 8px;
  }
  
  @media (max-width: 768px) {
    .feature-row {
      flex-direction: column;
      gap: 1rem;
    }
  }
</style>
